# 2026-01-06 - 일일 기록

##  주요 업무 및 작업
- PG SR 적용 학습 결과확인 하였을때 학습을 끝까지 완주하였음 허나 성능이 좋지않음을 발견 학습 그래프를 확인하였을때 스텝이 변동이 있을때 그시점부터 오락가락함 스텝변화가 성능 저하에 문제가있어보임
- 랜드마크 추론 결과를 어떻게 보정할지 고민하였음 일단 폐동맥 중심선을 기반으로 수직으로 오게끔 수정해야하는데 핵심은 중심선을 찾는것임 절차가 더 필요한데 절차는 다음과 같음
    - 폐동맥 SEG를 추론한다(이렇게되면 랜드마크랑 SEG 둘다 해야함 근데 둘다 상호작용해서 하자라고 먼저 제안해서 이부분은 상관없을듯한데)
    - SEG 마스크에서 중심선을 추론 
    - 중심선에 수직으로 보정
- 랜드마크 학습 결과 향상방식 고안
    - 현재 구현된건 해상도가 124인데 이렇게 다운샘플링하면 필연적으로 복셀좌표가 차이날수가있음 그래서 최대한 원본 해상도에 맞춰서 진행해야하는데 그렇게 하지않았던 이유는 예제코드를 그대로 살려서 진행했었음 근데 예제코드는 만인을 위한 코드여서 최대한 실행이 가능하게끔 설정되어있었음 현재 내가 사용하는 GPU는 성능이 받쳐주니 해상도를 좀더 올려서 진행해도 학습이되기에 224? 정도로 맞추고 진행하였음 그리고 학습률도 문제가있다고해서 좀더 타이트하게 수정하였는데 오히려 학습 진척도가 더뎌서 이부분은 안하기로했음
    - 추가로 멀티GPU사용방식을 적용하니 속도도 빠름
##  배운 점 및 인사이트
- 다운샘플링을 했을때 원본예측 지표개선은 한계가있음

##  문제 해결 및 코드 예시
### 멀티gpu사용법:
```python
# 3개의 gpu를 분할해서 사용하는방법
if torch.cuda.device_count() > 1:
        model = nn.DataParallel(model, device_ids=[0, 1, 2])
```


